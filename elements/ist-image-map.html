<link rel="import" href="../bower_components/polymer/polymer.html">

<polymer-element name="ist-image-map" attributes="lat lng zoom w h sensor mapstyle">
  <template>
  	 <img src="{{src}}" alt="lat:{{lat}},lng:{{lng}}" />  
  </template>
  <script>
    Polymer({
      lat: 43.53120,
      lng: -5.655469999999999,
      zoom: 12,
      sensor: false,
      size : false,
      mapstyle: 'gmaps',
      src :'',
      // initialize the element's model
      ready: function() {
      	if(typeof this.w ==='undefined') {
      		this.w=this.parentNode.offsetWidth;
      	}
      	if(typeof this.h ==='undefined') {
      		this.h=this.parentNode.offsetHeight;
      	}
      	this.size = this.w+'x'+this.h;

      	if(this.mapstyle==='gmaps'){
      		this.src ='http://maps.googleapis.com/maps/api/staticmap?center='+this.lat+','+this.lng+'&zoom='+this.zoom+'&size='+this.size+'&sensor='+this.sensor;
      	} else { 
      		//openstreetmap
      		this.src='http://staticmap.openstreetmap.de/staticmap.php?center='+this.lat+','+this.lng+'&zoom='+this.zoom+'&size='+this.size;
      	}
      },
    });
  </script>
</polymer-element>